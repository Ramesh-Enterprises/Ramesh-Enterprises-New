<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ramesh Fun Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{margin:0;font-family:Arial;background:#0f1220;color:#fff}
.hidden{display:none}
.card{background:#1b1f3a;margin:10px;padding:15px;border-radius:10px}
button{padding:10px;margin:5px;border:none;border-radius:6px;background:#ffcc00;font-weight:bold}
input{padding:10px;margin:5px;width:90%}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login" class="card">
<h2>Login</h2>
<input id="loginEmail" placeholder="Email">
<input id="loginPass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<p id="loginMsg"></p>
<p><a href="#" onclick="show('register')">Register</a></p>
</div>

<!-- REGISTER -->
<div id="register" class="card hidden">
<h2>Register</h2>
<input id="regEmail" placeholder="Email">
<input id="regPass" type="password" placeholder="Password">
<button onclick="register()">Register</button>
<p id="regMsg"></p>
<p><a href="#" onclick="show('login')">Login</a></p>
</div>

<!-- HUB -->
<div id="hub" class="hidden">
<div class="card">
<h2 id="userInfo"></h2>
<p id="stats"></p>
</div>

<div class="card">
<h3>Leaderboard</h3>
<div id="leaderboard"></div>
</div>

<div class="card grid">
<button onclick="show('games')">ðŸŽ® Games</button>
<button onclick="logout()">Logout</button>
</div>

<div id="admin" class="card hidden">
<h3>Admin Panel</h3>
<button onclick="giveCoins(500)">+500 Coins</button>
</div>
</div>

<!-- GAMES -->
<div id="games" class="hidden">
<div class="card grid">
<button onclick="guessGame()">Guess Number</button>
<button onclick="rps()">Rock Paper Scissors</button>
<button onclick="dice()">Dice Roll</button>
<button onclick="clickTest()">Click Speed</button>
<button onclick="clicker()">Idle Clicker</button>
</div>
<button onclick="show('hub')">â¬… Back</button>
</div>

<script>
// FIREBASE
firebase.initializeApp({
 apiKey:"AIzaSyDp_tfDDL5weoyBcs3_OknW0wNLM8PVQrQ",
 authDomain:"ramesh-fun-hub.firebaseapp.com",
 databaseURL:"https://ramesh-fun-hub-default-rtdb.firebaseio.com",
 projectId:"ramesh-fun-hub"
});
const auth=firebase.auth();
const db=firebase.database();

let user,coins=0,xp=0,level=1;

// AUTH STATE
auth.onAuthStateChanged(u=>{
 if(!u){show('login');return;}
 if(!u.emailVerified){
   alert("Verify email first!");
   auth.signOut();return;
 }
 user=u;
 loadUser();
});

// UI
function show(id){
 document.querySelectorAll('body>div').forEach(d=>d.classList.add('hidden'));
 document.getElementById(id).classList.remove('hidden');
}

// REGISTER
function register(){
 auth.createUserWithEmailAndPassword(
  regEmail.value,regPass.value
 ).then(res=>{
  res.user.sendEmailVerification();
  db.ref('users/'+res.user.uid).set({
   email:res.user.email,coins:0,xp:0,level:1
  });
  alert("Verify email then login");
  show('login');
 }).catch(e=>regMsg.innerText=e.message);
}

// LOGIN
function login(){
 auth.signInWithEmailAndPassword(
  loginEmail.value,loginPass.value
 ).catch(e=>loginMsg.innerText=e.message);
}

// LOAD USER
function loadUser(){
 db.ref('users/'+user.uid).once('value').then(s=>{
  let d=s.val();
  coins=d.coins;xp=d.xp;level=d.level;
  updateUI();
  show('hub');
  if(user.email==="rameshenterprises@protonmail.com")
    admin.classList.remove('hidden');
  updateLeaderboard();
 });
}

// SAVE
function save(){
 db.ref('users/'+user.uid).update({coins,xp,level});
 updateUI();updateLeaderboard();
}

// UI UPDATE
function updateUI(){
 userInfo.innerText=user.email;
 stats.innerText=`Coins: ${coins} | XP: ${xp} | Level: ${level}`;
}

// LEADERBOARD
function updateLeaderboard(){
 db.ref('users').orderByChild('coins').limitToLast(5)
 .once('value',s=>{
  leaderboard.innerHTML="";
  s.forEach(u=>{
   leaderboard.innerHTML+=`<p>${u.val().email}: ${u.val().coins}</p>`;
  });
 });
}

// REWARDS
function reward(c,x){
 coins+=c;xp+=x;
 if(xp>=100){level++;xp=0;}
 save();
}

// GAMES
function guessGame(){
 let n=Math.floor(Math.random()*10)+1;
 let g=prompt("Guess 1-10");
 if(+g===n){alert("Win");reward(50,20);}else alert("Lost");
}
function rps(){
 let a=["rock","paper","scissors"];
 let ai=a[Math.floor(Math.random()*3)];
 let u=prompt("rock/paper/scissors");
 if(u===ai)alert("Draw");
 else if((u==="rock"&&ai==="scissors")||(u==="paper"&&ai==="rock")||(u==="scissors"&&ai==="paper")){
  alert("Win");reward(40,15);
 } else alert("Lose");
}
function dice(){
 let d=Math.floor(Math.random()*6)+1;
 alert("Rolled "+d);
 if(d===6)reward(30,10);
}
function clickTest(){
 let c=0;
 let t=confirm("Click OK 10 times fast");
 if(t){reward(20,10);}
}
function clicker(){
 coins+=1;save();
}

// ADMIN
function giveCoins(n){coins+=n;save();}
function logout(){auth.signOut();}
</script>

</body>
</html>
